<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 4 JavaScript 09</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            margin: auto;
            max-width: 500px;
        }
    </style>
    <script>

        function codificar() {
            var encode = document.getElementById("encode").value;
            var desplazamiento = parseInt(document.getElementById("desplazamiento").value);
            var c_codificada = "";

            for (let i = 0; i < encode.length; i++) {
                var charCode = encode.charCodeAt(i);
                var cifrado = String.fromCharCode(charCode + desplazamiento);

                c_codificada += cifrado;
            }

            var c_codificada_invertida = invertir(c_codificada);

            document.getElementById("salida").innerHTML = c_codificada_invertida;
        }

        function decodificar() {
            var c_codificada = document.getElementById("encode").value;
            var desplazamiento = parseInt(document.getElementById("desplazamiento").value);
            var decode = "";

            var c_codificada_invertida = invertir(c_codificada);

            for (let i = 0; i < c_codificada_invertida.length; i++) {
                var charCode = c_codificada_invertida.charCodeAt(i);
                var descifrado = String.fromCharCode(charCode - desplazamiento);

                decode += descifrado;
            }

            document.getElementById("salida_decodificada").innerHTML = decode;
        }

        function invertir(cadena) {
            var cadenaInvertida = "";
            for (let i = cadena.length - 1; i >= 0; i--) {
                cadenaInvertida += cadena.charAt(i);
            }
            return cadenaInvertida;
        }

    </script>
</head>

<body>
    <label for="">Introduce el texto a encriptar.</label>
    <input type="text" name="" id="encode">

    <input type="text" name="" id="desplazamiento">
    <button onclick="codificar();">Codificar</button>
    <button onclick="decodificar();">Deodificar</button>

    <h1>Salida codificada:</h1><br />
    <p id="salida"></p>

    <h1>Salida decodificada:</h1><br />
    <p id="salida_decodificada"></p>
</body>

</html>